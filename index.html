// Add File Card or Image
            if (fileData) {
                // Check if it's an image based on the filename extension
                if (fileData.name.match(/\.(jpg|jpeg|png|gif)$/i)) {
                    const img = document.createElement('img');
                    img.src = "data:image/jpeg;base64," + fileData.data;
                    img.className = 'img-preview'; // Re-use your existing style
                    div.appendChild(img);
                    
                    // Also add a small download link below it
                    const dlLink = document.createElement('a');
                    dlLink.href = img.src;
                    dlLink.download = fileData.name;
                    dlLink.style.display = 'block';
                    dlLink.style.marginTop = '5px';
                    dlLink.style.color = '#aaa';
                    dlLink.style.fontSize = '12px';
                    dlLink.innerText = 'Download High-Res';
                    div.appendChild(dlLink);
                } else {
                    // It's a PDF/Doc/etc
                    const fileLink = document.createElement('a');
                    fileLink.href = "data:application/octet-stream;base64," + fileData.data;
                    fileLink.download = fileData.name;
                    fileLink.className = 'file-card';
                    fileLink.innerHTML = `<i class="fa-solid fa-file-arrow-down file-icon"></i> <div>${fileData.name}</div>`;
                    div.appendChild(fileLink);
                }
            }
